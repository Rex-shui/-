#### 2.2处理机调度（进程调度）

---

TODO

---

1. 作业提交到完成

   1. 作业调度
   2. 内存调度，将暂时不能运行的进程调至外存等待（挂起）
   3. 进程调度

2. 进程的调度方式

   * 非抢占式
   * 抢占式

3. 调度算法的评价准则

   * CPU利用率
   * 系统吞吐量：单位时间内CPU完成作业的数量。
   * 周转时间
     * 周转时间 = 作业完成时间 - 作业提交时间
     * 平均周转时间 = （作业1的周转时间 + ... + 作业n的周转时间）/  n
     * 带权周转时间 = 作业周转时间 / 作业实际运行时间
     * 平均带权周转时间......
   * 等待时间：进程处于等处理机状态的时间之和（处于就绪队列时间之和）
   * 响应时间：用户提交请求到系统首次产生响应所用的时间。

4. 调度算法

   **进程执行I/O会导致进程调度吗？**

   * 先来先服务（First-Come First-Served，FCFS）
   * 最短作业优先（Shortest-Job-First，SJF）
   * 优先级调度（非抢占式、抢占式）
     * 静态优先级：系统进程 > 用户进程，交互进程 > 非交互进程，I/O型进程 > 计算型进程
     * 动态优先级：进程执行的时间增加，优先权降低；作业等待的时间增加，优先权增高。
   * **高响应比优先调度算法**
     * 响应比Rp = （等待时间 + 要求服务时间）/  要求服务时间
   * 时间片轮转调度算法（**抢占式**）
   * **多级反馈队列调度算法**
     1. 设置多个就绪队列，并赋予不同的优先级。
     2. 各个队列中进程执行时间片的大小各不相同，优先级高的队列运行时间片小。
     3. 一个新进程进入内存后，放在第一级队列的末尾，时间片用完降级。



#### 例题

---

某系统采用基于优先权的非抢占式进程调度策略，完成一次进程调度和进程切换的系统时间开销为1μs。在T时刻就绪队列中有3个进程P1，P2，P3，其在就绪队列中的等待时间、需要的CPU时间和优先权如下表所示。  

| 进程 | 等待时间 | 需要的CPU时间 | 优先权 |
| ---- | -------- | ------------- | ------ |
| P1   | 30μs     | 12μs          | 10     |
| P2   | 15μs     | 24μs          | 30     |
| P3   | 18μs     | 36μs          | 20     |

若优先权值大的进程优先获得CPU，从T时刻起系统开始进程调度，则系统的平均周转时间为：  

 

解：

| 进程 | 到达  | 开始 | 结束 |
| ---- | ----- | ---- | ---- |
| P2   | -15μs | 1μs  | 25μs |
| P3   | -18μs | 26μs | 62μs |
| P1   | -30μs | 63μs | 75μs |

平均周转时间 = （40 + 80 + 105）/  3 = 75μs


